---
layout: post
title: "[Jekyll] 개발 환경 구축 및 블로그 시작하기"
tags: ["jekyll"]
---

`Jekyll`은 개인 또는 조직을 위한 정적 웹 사이트를 구축할 수 있는 오픈 소스입니다. 이번 장에서 `Jekyll`로 정적 웹 사이트를 개발하기 위핸 환경 구축과 블로그로써 `Jekyll` 프로젝트를 사용하는 법 그리고 `GitHub`에 직접 배포해보는 과정까지 함께 해보겠습니다.

## Jekyll 개발 환경 구축

저는 `Mac`을 사용하기 때문에 `macOS` 환경에서 개발 환경을 구축했습니다.

### Command-Line Tools

터미널을 통해 `Command-Line Tools`를 설치합니다.

```shell
$ xcode-select --install
```

`Command-Line Tools`를 설치해야 되는 이유는 [Xcode 없이 맥에 '명령어 라인 도구(Command Line Tools)'를 설치하는 방법](https://macnews.tistory.com/4243)에 잘 설명된 문구가 있어 차용해봤습니다.

> 맥 운영체제에서 'gcc' 'make' 같은 컴파일 툴이나 'svn' 'git' 같은 분산 버전 관리툴, 또는 기본적인 Unix/Linux 툴킷을 사용하려면 기본적으로 홈브류(Homebrew)나 명령어 라인 도구(Command Line Tools)을 먼저 설치해야 합니다.

### Homebrew 설치

`Homebrew`를 설치합니다. `Homebrew`는 `Ruby`를 설치하기 위해 필요하며, 만약 `Homebrew`가 이미 설치되어 있다면 건너띄어도 괜찮습니다.

```shell
$ /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
```

### Ruby 설치

`Homebrew`를 사용하여 `Ruby`를 설치합니다.

```shell
$ brew install ruby
```

`Shell` 설정에 `Ruby` 경로를 추가합니다. `Ruby` 경로를 추가해야 터미널에서 `Ruby` 명령어를 사용할 수 있습니다.

```shell
$ echo 'export PATH="/usr/local/opt/ruby/bin:$PATH"' >> ~/.bash_profile
```

`Ruby`와 `Gem`이 잘 설치되어 있는지 확인합니다.

```shell
$ ruby -v
ruby 2.6.3p62 (2019-04-16 revision 67580) [universal.x86_64-darwin19]
```

```shell
$ gem -v
3.0.3
```

### Jekyll 설치

`Gem`을 사용하여 `Jekyll`을 설치합니다.

```shell
$ sudo gem install -n /usr/local/bin/ jekyll
```

`Jekyll`이 잘 설치되어 있는지 확인합니다.

```shell
$ jekyll -v
jekyll 4.1.0
```

## Jekyll 프로젝트 생성

터미널을 통해 `Jekyll` 프로젝트를 생성합니다. `--blank` 옵션을 주게되면 테마가 없는 빈 프로젝트가 생성됩니다.

```shell
$ jekyll new my-blog --blank
New jekyll site installed in /path/to/my-blog.
```

프로젝트가 생성된 디렉토리로 이동하여 `Jekyll` 프로젝트를 실행합니다. `--port` 옵션을 따로 주지 않으면 기본적으로 `4000` 포트에서 실행됩니다.

```shell
$ cd my-blog
$ jekyll serve
```

[http://localhost:4000/](http://localhost:4000/)로 접속하여 `Jekyll` 프로젝트가 정상적으로 동작하는지 확인합니다.

### 디렉토리 구조

```shell
.
├── _config.yml
├── _data
├── _drafts
├── _includes
├── _layouts
├── _posts
├── _sass
├── _site
├── assets
└── index.md
```

| File/Directory | Description |
|:-:|-|
| _config.yml | 프로젝트에 사용될 환경 변수를 정의합니다. |
| _data | 사용자 정의 데이터 파일을 관리합니다. |
| _drafts | 아직 배포하지 않을 포스트들을 관리합니다. |
| _includes | 레이아웃에 공통적으로 사용하는 HTML 파일을 관리합니다. |
| _layouts | 레이아웃을 정의한 HTML 파일을 관리합니다. |
| _posts | 배포된 포스트들을 관리합니다. |
| _sass | `sass` 확장자 파일을 관리합니다. |
| _site | 웹 사이트 구동에 필요한 정적 파일들이 생성되는 디렉토리입니다. |
| assets | `css`, `js`와 같은 정적 파일들을 관리합니다. |
| index.md | Index 페이지를 정의합니다. |

## Jekyll 블로그 시작하기

본격적으로 `Jekyll` 블로그를 시작하려고 합니다. 제일 먼저 레이아웃 파일을 작성해야합니다. 홈 화면에서는 포스트 리스트를 화면에 출력하고 포스트를 클릭하면 포스트 상세 화면으로 넘어갈 수 있도록 레이아웃을 정의합니다. 대략적으로 아래와 같은 형태로 레이아웃 파일을 정의할 수 있습니다.

{% raw %}
```html
<!DOCTYPE html>
<html>
{% include head.html %}
<body>
    {% include header.html %}
    <!-- main -->
    {% include footer.html %}
</body>
</html>
```
{% endraw %}

공통적으로 사용하는 `HTML` 파일들은 `_includes` 디렉토리 하위에서 관리하면 코드의 중복을 방지하고 유지보수에 유리합니다.

### home.html

`_layouts` 디렉토리 하위에 `home.html` 파일을 생성하고 위에서 정의한 템플릿을 복사하여 붙여넣습니다. `<-- main -->` 부분에다 아래처럼 작성하여 포스트 리스트를 홈 화면에 출력할 수 있도록 합니다.

{% raw %}
```html
<ul>
    {% for post in site.posts %}
    <li>
        <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
    </li>
    {% endfor %}
</ul>
```
{% endraw %}

### index.md

사용자가 웹 사이트에 접속할 때 홈 화면을 바라볼 수 있도록 `index.md` 파일을 아래처럼 작성합니다.

```markdown
---
layout: home
---
```

### post.html

`_layouts` 디렉토리 하위에 `post.html` 파일을 생성하고 위에서 정의한 템플릿을 복사하여 붙여넣습니다. `<-- main -->` 부분에다 아래처럼 작성하여 포스트 상세 화면을 출력할 수 있도록 합니다. `content`는 사용자가 작성한 포스트가 바인딩됩니다.

{% raw %}
```html
<section class="post">
    <h1>{{ page.title }}</h1>
    {{ content }}
</section>
```
{% endraw %}

## 포스트 작성

포스트는 `_posts` 디렉토리 하위에 `YYYY-MM-DD-POST-TITLE.md`와 같은 형태의 파일로 관리할 수 있습니다. 형식에 맞추어 파일을 생성한 다음 아래처럼 포스트를 작성합니다.

```markdown
---
layout: post
title: Hello World!
---

Hello World!
```

`layout` 변수에 `post`라고 작성한 이유는 위에서 `post.html`로 포스트 상세 화면 레이아웃을 정의했기 때문입니다. `title`은 `post.html`에서 `page.title`과 같은 형태로 변수를 바인딩할 수 있습니다. 그밖의 포스트 변수에 대한 자세한 설명은 [https://jekyllrb.com/docs/front-matter/](https://jekyllrb.com/docs/front-matter/)를 참조하시면 됩니다.

터미널을 열고 프로젝트의 루트 디렉토리로 이동하여 아래와 같이 입력합니다. `_site` 디렉토리 하위에 웹 사이트 구동에 필요한 모든 정적 파일들이 생성되면서 웹 서버가 구동됩니다.

```shell
$ jekyll serve
```

[http://localhost:4000/](http://localhost:4000/)로 접속하여 홈 화면에 작성한 포스트가 있는지 확인합니다. 해당 포스트를 클릭하여 상세 화면으로 넘어가는지도 확인할 수 있습니다.

### draft 작성

아직 배포하고 싶지 않은 포스트는 `_drafts` 디렉토리 하위에 `POST-TITLE.md`와 같은 형태의 파일로 관리할 수 있습니다. 배포되지 않기 때문에 `jekyll serve` 명령을 사용하더라도 `_site` 디레고리 하위에 정적 파일로 생성되지 않습니다. 로컬 환경에서 해당 포스트를 확인하고 싶다면 아래와 같이 입력하면 됩니다.

```shell
$ jekyll serve --draft
```

## Github 배포

`Github`에서 `Github Page`라는 서비스를 무료로 이용할 수 있습니다. `Github Page`는 `Repository`에 저장한 파일을 웹 페이지로 보여줄 수 있는 서비스입니다. 즉, 정적 웹 사이트를 구축할 수 있습니다.

`Repository` 생성 버튼을 누른 다음 `[username].github.io`이라는 이름으로 `Repository`를 생성합니다. 반드시 `[username].github.io`라는 이름으로 만드셔야 합니다.

터미널을 열고 `Jekyll` 프로젝트 디렉토리로 가서 아래와 같이 입력하여 `Repository`에 `Jekyll` 프로젝트를 업로드합니다.

```shell
$ git init
$ git add .
$ git commit -m "publish jekyll blog"
$ git remote add origin https://github.com/[username]/[username].github.io.git
$ git push -u origin master
```

정상적으로 업로드가 되었다면 [https://[username].github.io](https://[username].github.io)에 접속하여 `Jekyll` 블로그가 정상적으로 호스팅되는지 확인하면 됩니다! 사이트가 구동되는 데에 시간이 조금 걸릴 수는 있습니다.

## References

- [https://jekyllrb.com/](https://jekyllrb.com/)
- [Xcode 없이 맥에 '명령어 라인 도구(Command Line Tools)'를 설치하는 방법](https://macnews.tistory.com/4243)
- [GitHub Pages를 이용한 무료 홈페이지 만들기](https://wepplication.github.io/programming/github-pages/)
